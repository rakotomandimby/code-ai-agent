# Handle Gemini Error

When the Gemini API answers with other than an HTTP 200 status code, the response has this structure:

```json
{
  "error": {
    "code": 400,
    "message": "The request is missing a required parameter, includes an invalid parameter value, includes a parameter more than once, or is otherwise malformed.",
    "status": "BAD_REQUEST"
  }
}
```

When that happens, I want the application to build a response that looks like the usual response but puts the error message as the answer from the API.

Tell me the modifications to make to the code in order to achieve that.

Mar 25 22:37:06 universe code-ai-agent-monorepo[1312]: Response body: {"error":{"message":"This model's maximum context length is 128000 tokens. However, your messages resulted in 178679 tokens. Please reduce the length of the messages.","type":"invalid_request_error","param":"messages","code":"context_length_exceeded"}}



